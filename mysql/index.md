# 基本概念

***索引是資料庫中一種用於提高資料檢索效率的資料結構。它類似於書籍的目錄，可以幫助資料庫系統快速定位和訪問資料，而無需掃描整個表。***

### 工作原理

* 索引的底層結構通常是B+Tree或其他平衡樹結構，使資料能夠快速定位
* 資料庫引擎根據查詢條件進行索引樹的遍歷，減少需要掃描的資料行數
* 查詢時，資料庫首先檢查索引，然後直接訪問相關資料。
* 使用資料庫查詢優化工具（如EXPLAIN或DESCRIBE）分析查詢計劃，找出需要優化的查詢

### 常見類型

* B+Tree索引：最常用，適合範圍查詢。
* Hash索引：適合精確匹配查詢。
* 全文索引：用於全文搜索。
* 空間索引：用於地理空間資料。

### 優點

* 提高查詢速度：大大減少資料庫需要掃描的資料量。
* 排序加速：如果索引的列順序與ORDER BY子句匹配，可以避免排序操作。
* 優化連接[^1]：在連接操作中，索引可以顯著提高性能。
* 減少I/O操作，從而提高系統性能

### 缺點

* 額外的存儲空間：索引需要占用額外的磁盤空間。
* 降低寫入速度：插入、更新和刪除操作需要同時更新索引。
* 維護成本：需要定期維護和優化索引。

### 使用場景

* 經常用於查詢條件的列。
* 頻繁排序或分組的列。
* 外鍵關係的列。

### 設計索引

* 分析查詢模式，選擇常用的查詢條件、排序或聯接列進行索引設計
* 使用單列索引、多列索引（複合索引）來優化常見查詢
* 避免在變化頻繁或基數很低的列上創建索引
* 考慮覆蓋索引，即索引中包含查詢所需的所有列，避免回表操作

### 注意事項

* 過多索引會影響寫入性能。
* 高選擇性的列(**列中的值具有較高的唯一性或區分度**)更適合建立索引。
* 複合索引的列順序很重要。
* 定期檢查分析和優化索引，表資料經歷大量變動後可以考慮直接重建索引
* 資料庫會自動使用主鍵（Primary Key）作為唯一索引，外鍵（Foreign Key）也會自動被索引

[^1]: 優化連接是指在資料庫的連接操作中使用索引來提高查詢效率。通過在連接條件的列上建立適當的索引，可以顯著減少資料庫需要掃描的行數，從而大大提升連接操作的性能。